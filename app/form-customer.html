<div ng-show="$state.is('form.customer')">
	<h2>ACT Aspire Order Form</h2>	
<div class="col-sm-12">
  <p>
    Thank you for your decision to order ACT Aspire! To help ensure your order is accurate please fill in all applicable boxes.
  </p>
  <p>
    If you have any questions on the order form below, please contact <a href="mailto:Orders@ActAspire.org">Orders@ActAspire.org</a> or 1-855-730-0400
  </p>
  <p>
    Pricing valid through {{cost.pricing.validThrough}}
  </p>

	<button type="button" class="pull-left btn btn-primary" aria-label="Remove" ng-click="testTaxRates()">
		Test Tax Rates
	</button>

</div>
<!-- use ng-submit to catch the form submission and use our Angular function -->
<form id="customerForm" name="customerForm" ng-submit="processForm()"> 

	<h3>1. Contact Information</h3>

	<div class="row"><div class="col-sm-12"><h4>Date: {{date | date:'yyyy-MM-dd'}}</h4></div></div>

	<div class="row">
	    <div class="form-group col-sm-4 required">
	        <label for="firstName" class="control-label">First Name</label>
	        <input type="text" class="form-control" name="firstName" ng-model="formData.customer.firstName" required="required">
	    </div>

	    <div class="form-group col-sm-4 required">
	        <label for="lastName" class="control-label">Last Name</label>
	        <input type="text" class="form-control" name="lastName" ng-model="formData.customer.lastName" required="required">
	    </div>

	    <div class="form-group col-sm-4 required">
	        <label for="organization" class="control-label">School / District / Organization</label>
	        <input type="text" class="form-control" name="organization" ng-model="formData.customer.organization" required="required">
	    </div>
	</div>

	<div class="row">
	    <div class="form-group col-sm-4 required">
	        <label for="jobTitle" class="control-label">Job Title</label>
	        <input type="text" class="form-control" name="jobTitle" ng-model="formData.customer.jobTitle" required="required">
	    </div>

	    <div class="form-group col-sm-4 required">
	        <label for="email" class="control-label">Email</label>
	        <input type="email" class="form-control" name="email" ng-model="formData.customer.email" required="required">
	    </div>

	    <div class="form-group col-sm-4">
	        <label for="howHeard" class="control-label">Tell Us How You Heard About Us</label>
	        <select class="form-control" name="howHeard" ng-model="formData.customer.howHeard" ng-options="option for option in cost.howHeardOptions"/>
	    </div>
	    
	</div>

	<div class="row">
		<div class="col-sm-6 form-group">
		    <label class="checkbox-inline">
		    	<input type="checkbox" ng-model="formData.customer.groupOrder">
		    	Are you part of a group order?
		    </label>
		    <p><a href="http://www.discoveractaspire.org/order/" target="_blank">Not sure? Find more information about Group Orders</a></p>
		</div>

	    <div class="form-group col-sm-6 required" ng-show="formData.customer.groupOrder">
	        <label for="groupContact" class="control-label">Group Owner Name</label>
	        <input type="text" class="form-control" name="groupContact" ng-model="formData.customer.groupContact" ng-required="formData.customer.groupOrder">
	    </div>
	</div>

	<div class="panel panel-default">
	    <div class="panel-heading">Contact Information</div>
	    <div class="panel-body">
	        <div class="row">
	            <div class="form-group col-sm-4 required">
	                <label for="implementationName" class="control-label">Test Coordinator Contact Name</label>
	                <input type="text" class="form-control" name="implementationName" ng-model="formData.implementationContact.name" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="implementationEmail" class="control-label">Test Coordinator Contact Email</label>
	                <input type="email" class="form-control" name="implementationEmail" ng-model="formData.implementationContact.email" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="implementationPhone" class="control-label">Test Coordinator Contact Phone</label>
	                <input type="tel" class="form-control" name="implementationPhone" ng-model="formData.implementationContact.phone" required="required">
	            </div>
	        </div>
	        <div class="row">
	            <div class="form-group col-sm-4 required">
	                <label for="backupName" class="control-label">Backup Contact Name</label>
	                <input type="text" class="form-control" name="backupName" ng-model="formData.backupContact.name" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="backupEmail" class="control-label">Backup Contact Email</label>
	                <input type="email" class="form-control" name="backupEmail" ng-model="formData.backupContact.email" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="backupPhone" class="control-label">Backup Contact Phone</label>
	                <input type="tel" class="form-control" name="backupPhone" ng-model="formData.backupContact.phone" required="required">
	            </div>
	        </div>        
	    </div>
	</div>

	<div class="panel panel-default">
	    <div class="panel-heading">Billing Information</div>
	    <div class="panel-body">
	    	<div class="row">
			    <div class="col-sm-12">
				    <p>If you are tax exempt, please email a copy of your exemption certificate to <a href="mailto:Orders@ActAspire.org">Orders@ActAspire.org</a></p>
			    </div>
			</div>
	        <div class="row">
	            <div class="form-group col-sm-4 required">
	                <label for="billingName" class="control-label">Billing Contact Name</label>
	                <input type="text" class="form-control" name="billingName" ng-model="formData.billingContact.name" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="billingEmail" class="control-label">Billing Contact Email</label>
	                <input type="email" class="form-control" name="billingEmail" ng-model="formData.billingContact.email" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="billingPhone" class="control-label">Billing Contact Phone</label>
	                <input type="tel" class="form-control" name="billingPhone" ng-model="formData.billingContact.phone" required="required">
	            </div>
	        </div>    
	        <div class="row">
	            <div class="form-group col-sm-12 required">
	                <label for="billingAddress" class="control-label">Billing Address Line 1</label>
	                <input type="text" class="form-control" name="billingAddress" ng-model="formData.billing.address.line1" required="required">
	            </div>
	        </div>
	        <div class="row">
	            <div class="form-group col-sm-12">
	                <label for="billingAddress" class="control-label">Billing Address Line 2</label>
	                <input type="text" class="form-control" name="billingAddress" ng-model="formData.billing.address.line2">
	            </div>
	        </div>        
	        <div class="row">
	            <div class="form-group col-sm-4 required">
	                <label for="city" class="control-label">City</label>
	                <input type="text" class="form-control" name="city" ng-model="formData.billing.address.city" required="required">
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="state" class="control-label">State</label>
	        		<select class="form-control" name="state" ng-model="formData.billing.address.state" ng-options="key as value for (key , value) in states" required="required"></select>
	            </div>

	            <div class="form-group col-sm-4 required">
	                <label for="zip" class="control-label">Zip</label>
	                <input type="text" class="form-control" name="zip" ng-model="formData.billing.address.zip" required="required" ng-pattern="/^(\d{5}-\d{4}|\d{5})$/">
	            </div>
	        </div> 
	        <div class="row">
	            <div class="form-group col-sm-4">
	                <label for="purchaseOrderNumber" class="control-label">Purchase Order #</label>
	                <input type="text" class="form-control" name="city" ng-model="formData.billing.purchaseOrderNumber">
	            </div>	        
	        </div>   
	    </div>
	</div>

	<h3>2. Summative Order Data</h3>
	<div class="row">
		<div class="col-sm-12">
	  		<h5>ACT Aspire Summative Test</h5>
	  		<ul>
			    <li>Is a vertically scaled, standards-based battery of achievement test that are linked to the College and Career Readiness Standard in the subject areas of: English, mathematics, reading, science and writing.</li>				
			    <li>Designed for Grades 3 - 10 and can be taken Online or in Paper form (paper administration requires an additional fee).</li>
			    <li>Can be administered in a Spring test administration window or a Fall test administration window.</li>
			    <li>When ordering Summative assessments, the following discounts are available*:
			    	<ul>
			    		<li>Test four or more grades of students: $1.00 off</li>
						<li>Test 400 to 1,000 students: $1.00 off</li>
						<li>Test over 1,000 students: $2.00 off</li>
						<li>Bundle Periodic to Summative order: $4.00 off (applied to Summative)</li>
			    	</ul>
			    </li>
			</ul>			
		</div>		
	</div>
		
	<div class="panel panel-default" ng-repeat="order in orders.summative.orders">
		<div class="panel-heading">
			{{order.administrationWindow}} {{order.calendarYear}} Summative Order
			<button type="button" class="pull-right btn btn-default btn-xs" aria-label="Remove" ng-click="removeOrder(orders.summative.orders, order)">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
			</button>
		</div>
		<div class="panel-body">
		<div ng-show="order.cost.lateFee" class="alert alert-danger">
		A late fee of {{order.cost.lateFee | currency}} will be applied to this order.
		</div>
		<h5>Subjects</h5>
		<div class="row">
	    	<div class="col-sm-2 form-group" ng-repeat="(subject,enabled) in order.subjects">
	            <label class="checkbox-inline">
	            	<input type="checkbox" ng-model="order.subjects[subject]">
	            	{{subject}}
	            </label>
	        </div>
	    </div>
	    <h5>Printed Student Reports</h5>
	    <div class="row">
	    	<div class="col-sm-6 form-group">
			    <label class="checkbox-inline">
			    	<input type="checkbox" ng-model="order.individualReports">
			    	Add Printed Individual Student Reports
			    </label>
		    </div>
	     	<div class="col-sm-6 form-group">
			    <label class="checkbox-inline">
			    	<input type="checkbox" ng-model="order.scoreLabels">
			    	Add Printed Score Labels (x1 per student) - {{order.cost.labels | currency}}
			    </label>
		    </div>
		</div>
		<div class="row" ng-show="order.individualReports">
	    	<div class="col-sm-6 form-group">
				<label>
					<input type="radio" ng-model="order.reportsPerStudent" value="1">
					Individual Score Reports (x1 per student) - {{order.cost.isr | currency}}
				</label>
				<label>
					<input type="radio" ng-model="order.reportsPerStudent" value="2">
					Individual Score Reports (x2 per student) - {{order.cost.isr * 2 | currency}}
				</label>			
		    </div>
	    </div>

		<table class="table table-striped">
			<thead>
				<th></th>
				<th>Online Test</th>
				<th>Paper Test</th>
				<th>Total Student Estimate</th>
			</thead>
			<tr ng-repeat="grade in [3,4,5,6,7,8,9,10]">
				<td>Grade {{grade}}</td>
				<td><input type="number" ng-model="order.grade[grade].online" name="" min="0"></td>
				<td><input type="number" ng-model="order.grade[grade].paper" name="" min="0"></td>
				<td>{{order.grade[grade].online + order.grade[grade].paper}}</td>
			</tr>
			<tr>
				<td>Total</td>
				<td>{{order.online.total}}</td>
				<td>{{order.paper.total}}</td>
				<td>{{order.paper.total + order.online.total}}</td>
			</tr>
		</table>
	</div>
	</div>

	<div class="row">
		<div class="form-group col-sm-7">
			<label for="calendarYear" class="control-label">What administrative window and year would you like to order?</label>
			<select class="form-control" name="calendarYear" ng-model="summative.calendarYear">
				<option value="">---Please select---</option>
	      		<option ng-repeat="item in cost.pricing.summative" value="{{item.semester}} {{item.year}}">{{item.semester}} {{item.year}}</option>
			 </select>
		</div>
		<div class="form-group col-sm-2">
			<label class="control-label">&nbsp;</label>
			<div>
				<button type="button" ng-model="addSummativeOrderButton" ng-click="addOrder(orders.summative.orders, summative.calendarYear, summative.error)" class="btn btn-primary" ng-disabled="!summative.calendarYear">Order Assessments</button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="alert alert-danger" role="alert" ng-show="summative.error">
			<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
			<span class="sr-only">Error:</span>
			{{summative.error}}
		</div>
	</div> 	

	<h3>3. Periodic Order Data</h3>
	<div class="row">
		<div class="col-sm-12">
	  		<h5>ACT Aspire Periodic</h5>
	  		<ul>
			    <li>Is a complement to the ACT Aspire Summative test, offered via ACT Aspire’s Online platform.</li>
			    <li>Includes access to Classroom quizzes (designed for grades 3 – 8) as well as Interim Assessments (designed for grades 3 – 10)</li>
			    <li>Is a subscription to access a series of interim tests and classroom quizzes in the subject areas of: English, mathematics, reading, science and writing. The subscription is effective from September through June of each school year.</li>
			    <li>Can be administered to students throughout the year and provides immediate performance analysis and score reporting.</li>
				<li>Can be bundled with ACT Aspire Summative test at a per-student discount off of the Summative test (discount will be automatically applied. Refer to Order Summary below).</li>				
			</ul>
		</div>		
	</div>

	<div class="panel panel-default" ng-repeat="order in orders.periodic.orders">
		<div class="panel-heading">
			{{order.calendarYear | schoolYear}} Periodic Order
			<button type="button" class="pull-right btn btn-default btn-xs" aria-label="Remove" ng-click="removeOrder(orders.periodic.orders, order)">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
			</button>
		</div>
		<table class="table table-striped">
			<thead>
				<th></th>
				<th>Online Test</th>
			</thead>
			<tr ng-repeat="grade in [3,4,5,6,7,8,9,10]">
				<td>Grade {{grade}}</td>
				<td><input type="number" ng-model="order.grade[grade].online" name="" min="0"></td>
			</tr>
			<tr>
				<td>Total</td>
				<td>{{order.onlineTotal}}</td>
			</tr>
		</table>
	</div>

	<div class="row">
		<div class="form-group col-sm-7">
			<label for="schoolYear" class="control-label">What school year would you like to order?</label>
			<select class="form-control" name="schoolYear" ng-model="periodic.schoolYear">
				<option value="">---Please select---</option>
	      		<option ng-repeat="item in cost.periodicCalendarYears" value="{{item}}">{{item | schoolYear}}</option>
			 </select>
		</div>
		<div class="form-group col-sm-2">
			<label class="control-label">&nbsp;</label>
			<div>
				<button type="button" ng-model="addPeriodicOrderButton" ng-click="addOrder(orders.periodic.orders, periodic.schoolYear)"  class="btn btn-primary" ng-disabled="!periodic.schoolYear">Order Assessments</button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="alert alert-danger" role="alert" ng-show="periodic.error">
			<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
			<span class="sr-only">Error:</span>
			{{periodic.error}}
		</div>
	</div> 	

	<h3>4. Order Summary</h3>
	<div class="panel panel-default">
		<div class="panel-heading">
			Order Summary
		</div>
		<div class="panel-body">
			<div class="row">
				<div class="col-sm-6 form-group">
				    <label class="checkbox-inline">
				    	<input type="checkbox" ng-model="formData.hasDiscountCode">
				    	Do you have a discount coupon code?
				    </label>
				</div>
				<div class="form-group col-sm-4" ng-show="formData.hasDiscountCode">
					<label for="discountCode" class="control-label">Discount Code</label>
					<input type="text" class="form-control" name="discountCode" ng-model="discountCode">
				</div>
				<div class="col-sm-2" ng-show="formData.hasDiscountCode">
					<label class="control-label">&nbsp;</label>
					<div>
						<button type="button" ng-click="addDiscountCode(discountCode); discountCode = '';" class="btn btn-default">Add</button>
					</div>
				</div>
			</div>
			<div class="row" ng-show="formData.hasDiscountCode">	
				<div class="col-sm-offset-6 col-sm-6" ng-show="!formData.summary.discount.special.error">
					<p class="coupon-code">{{formData.summary.discount.special.code}}</p>
				</div>
				<div class="col-sm-offset-6 col-sm-6 alert alert-danger" role="alert" ng-show="formData.summary.discount.special.error">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span class="sr-only">Error:</span>
					{{formData.summary.discount.special.error}}
				</div>
			</div> 	
		</div>
		<table class="table table-striped table-condensed">
			<thead>
				<th>Product Ordered</th>
				<th>Total Student</th>
				<th>Price</th>
				<th>Extended Price</th>
				<th>Discounts</th>
				<th>Total Discount</th>
				<th>Order Balance</th>
			</thead>
			<tbody>
				<tr ng-repeat="order in orders.summative.orders | filter:notZero('online')">
					<td>{{order.administrationWindow}} {{order.calendarYear}} Summative Order Online</td>
					<td>{{order.online.total}}</td>
					<td>
						<div ng-show="order.individualReports || order.scoreLabels">
							<div>{{order.cost.online | currency}}</div>
							<div ng-show="order.individualReports">{{order.reportsPerStudent * order.cost.isr | currency}} (ISR)</div>
							<div ng-show="order.scoreLabels">{{order.cost.labels | currency}} (Labels)</div>
							<hr />
						</div>
						<div>{{order.online.price  | currency}}</div>
					</td>
					<td>{{order.online.extendedPrice | currency}}</td>
					<td>
						<span ng-show="order.online.totalDiscountPerStudent">
							<div ng-show="order.online.discounts.volume">{{order.online.discounts.volume | currency}} (Volume)</div>
							<div ng-show="order.online.discounts.multiGrade">{{order.online.discounts.multiGrade | currency}} (Multi-Grade)</div>
							<div ng-show="order.online.discounts.periodic">{{order.online.discounts.periodic | currency}} ({{order.online.periodicNumberApplied | number : 1 }} Periodic @ {{cost.discounts.periodic.discountPer | currency}})</div>
							<div ng-show="order.online.discounts.state">{{order.online.discounts.state | currency}} (State)</div>
							<div ng-show="order.online.discounts.special">{{order.online.discounts.special | currency}} (Special)</div>
							<hr />
						</span>
						<div>{{order.online.totalDiscountPerStudent | currency}} (Total Discount)</div>
					</td>	
					<td>{{order.online.totalDiscount | currency}}</td>
					<td>{{order.online.balance | currency}}</td>				
				</tr>
				<tr ng-repeat="order in orders.summative.orders | filter:notZero('paper')">
					<td>{{order.administrationWindow}} {{order.calendarYear}} Summative Order Paper</td>
					<td>{{order.paper.total}}</td>
					<td>
						<div ng-show="order.individualReports || order.scoreLabels">
							<div>{{order.cost.paper | currency}}</div>
							<div ng-show="order.individualReports">{{order.reportsPerStudent * order.cost.isr | currency}} (ISR)</div>
							<div ng-show="order.scoreLabels">{{order.cost.labels | currency}} (Labels)</div>
							<hr />
						</div>
						<div>{{order.paper.price  | currency}}</div>
					</td>
					<td>{{order.paper.extendedPrice | currency}}</td>
					<td>
						<span ng-show="order.paper.totalDiscountPerStudent">
							<div ng-show="order.paper.discounts.volume">{{order.paper.discounts.volume | currency}} (Volume)</div>
							<div ng-show="order.paper.discounts.multiGrade">{{order.paper.discounts.multiGrade | currency}} (Multi-Grade)</div>
							<div ng-show="order.paper.discounts.periodic">{{order.paper.discounts.periodic | currency}} ({{order.paper.periodicNumberApplied | number : 1 }} Periodic @ {{cost.discounts.periodic.discountPer | currency}})</div>
							<div ng-show="order.paper.discounts.state">{{order.paper.discounts.state | currency}} (State)</div>
							<div ng-show="order.paper.discounts.special">{{order.paper.discounts.special | currency}} (Special)</div>
							<hr />
						</span>
						<div>{{order.paper.totalDiscountPerStudent | currency}} (Total Discount)</div>
					</td>	
					<td>{{order.paper.totalDiscount | currency}}</td>
					<td>{{order.paper.balance | currency}}</td>				
				</tr>
				<tr ng-repeat="order in orders.periodic.orders">
					<td>{{order.administrationWindow}} {{order.calendarYear | schoolYear}} Periodic Order Online</td>
					<td>{{order.onlineTotal}}</td>
					<td>{{order.price  | currency}}</td>
					<td>{{order.extendedPrice | currency}}</td>
					<td>
						<span ng-show="order.totalDiscountPerStudent">
							<div ng-show="order.discounts.state">{{order.discounts.state | currency}} (State)</div>
							<div ng-show="order.discounts.special">{{order.discounts.special | currency}} (Special)</div>
							<hr />
						</span>
						<div>{{order.totalDiscountPerStudent | currency}} (Total Discount)</div>
					</td>	
					<td>{{order.totalDiscount | currency}}</td>
					<td>{{order.balance | currency}}</td>						
				</tr>
				<tr ng-repeat="order in orders.summative.orders" ng-if="order.cost.lateFee">
					<td>Late Fee</td>
					<td>--</td>
					<td>{{order.cost.lateFee | currency}}</td>
					<td>--</td>
					<td>--</td>
					<td>--</td>
					<td>{{order.cost.lateFee | currency}}</td>
				</tr>
				<tr>
					<td colspan="7">
						<h4>Total: {{formData.summary.total | currency}} <span ng-show="formData.summary.tax"> + {{formData.summary.tax | currency}} ({{formData.summary.taxRate}} Sales Tax) = {{formData.summary.totalWithTax | currency}}</span></h4>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="panel panel-default">
		<div class="panel-heading">Additional Comments</div>
		<div class="panel-body">
			<textarea class="form-control" rows="3" ng-model="formData.comments"></textarea>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-12 form-group">
		    <label class="checkbox-inline">
		    	<input type="checkbox" ng-model="formData.acceptTerms">
		    	I agree to ACT Aspire's <a href="./json/ActAspireTermsAndConditions.pdf" target="_blank">Terms and Conditions</a> as updated as of August 8th, 2016.
		    </label>
		</div>
	</div>

	<div class="row" ng-show="formData.acceptTerms">
	    <div class="form-group col-sm-12 required">
	        <label for="signature" class="control-label">Signature:</label>
	        <input type="text" class="form-control" name="signature" ng-model="formData.customer.signature" required="required" placeholder="Enter your name as a signature">
	    </div>
	</div>

	<div class="row">
	<p>*Please note - all orders shall not be subject to a cancellation fee.</p>
	</div>
	
	<div class="row">
	    <div class="col-sm-4">
	  		<button type="submit" class="btn btn-primary" ng-disabled="customerForm.$invalid || customerForm.$pending || !formData.acceptTerms || !formData.summary.total">Submit Order</button>
	    </div>
		<div class="col-sm-4">
	  		<button type="button" class="btn btn-default" ng-click="printPage()">Print Page</button>
	    </div>
	</div>

</form>
</div>
<div ui-view></div>
